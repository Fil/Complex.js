/*
 Complex.js v1.5.0 13/07/2015

 Copyright (c) 2015, Robert Eisele (robert@xarg.org)
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
(function(m){function h(a,b){if(null===a||void 0===a)d.r=0,d.i=0;else if(void 0!==b)d.r=a,d.i=b;else switch(typeof a){case "object":"i"in a&&"r"in a?(d.r=a.r,d.i=a.i):"im"in a&&"re"in a?(d.r=a.re,d.i=a.im):"abs"in a&&"arg"in a?(d.r=a.abs*Math.cos(a.arg),d.i=a.abs*Math.sin(a.arg)):k();break;case "string":d.i=d.r=0;for(var c=/[+-]?(?:[\di.]e[+-]?[\di]+|[\di.]+)/ig,e,g=0;null!==(e=c.exec(a));g=1)if(-1!==e[0].indexOf("i")){e=e[0].replace("i","");if("+"===e||"-"===e||""===e)e+="1";d.i+=parseFloat(e)}else d.r+=
parseFloat(e[0]);0===g&&k();break;case "number":d.i=0;d.r=a;break;default:k()}isNaN(d.r*d.i)&&k()}function k(){throw"Invalid Param";}function l(a,b){if(1E3>a&&1E3>b)return.5*Math.log(a*a+b*b);a=Math.abs(a);b=Math.abs(b);var c=Math.min(a,b);a=Math.max(a,b);c/=a;return Math.log(a)+.5*Math.log(1+c*c)}function c(a,b){if(!(this instanceof c))return new c(a,b);h(a,b);this.r=d.r;this.i=d.i}var d={r:0,a:0};Math.cosh=Math.cosh||function(a){return.5*(Math.exp(a)+Math.exp(-a))};Math.sinh=Math.sinh||function(a){return.5*
(Math.exp(a)-Math.exp(-a))};c.prototype={r:0,i:0,sign:function(){var a=this.abs();return new c(this.r/a,this.i/a)},add:function(a,b){h(a,b);return new c(this.r+d.r,this.i+d.i)},sub:function(a,b){h(a,b);return new c(this.r-d.r,this.i-d.i)},mul:function(a,b){h(a,b);return new c(this.r*d.r-this.i*d.i,this.r*d.i+this.i*d.r)},div:function(a,b){h(a,b);a=this.r;b=this.i;var f=d.r,e=d.i,g;if(0===f&&0===e)throw"DIV/0";if(Math.abs(f)<Math.abs(e))return g=f/e,f=f*g+e,new c((a*g+b)/f,(b*g-a)/f);g=e/f;f=e*g+f;
return new c((a+b*g)/f,(b-a*g)/f)},pow:function(a,b){h(a,b);a=this.r;b=this.i;if(0===a&&0===b)return new c(0,0);var f=Math.atan2(b,a),e=l(a,b);a=Math.exp(d.r*e-d.i*f);b=d.i*e+d.r*f;return new c(a*Math.cos(b),a*Math.sin(b))},sqrt:function(){var a=this.abs();return new c(Math.sqrt(.5*(a+this.r)),Math.sqrt(.5*(a-this.r))*(0>this.i?-1:1))},exp:function(){var a=Math.exp(this.r);return new c(a*Math.cos(this.i),a*Math.sin(this.i))},log:function(){var a=this.r,b=this.i;return new c(l(a,b),Math.atan2(b,a))},
abs:function(){var a=Math.abs(this.r),b=Math.abs(this.i);if(1E3>a&&1E3>b)return Math.sqrt(a*a+b*b);a<b?(a=b,b=this.r/this.i):b=this.i/this.r;return a*Math.sqrt(1+b*b)},arg:function(){return Math.atan2(this.i,this.r)},sin:function(){var a=this.r,b=this.i;return new c(Math.sin(a)*Math.cosh(b),Math.cos(a)*Math.sinh(b))},cos:function(){var a=this.r,b=this.i;return new c(Math.cos(a)*Math.cosh(b),-Math.sin(a)*Math.sinh(b))},tan:function(){var a=this.r,b=this.i,d=Math.cos(2*a)+Math.cosh(2*b);return new c(Math.sin(2*
a)/d,Math.sinh(2*b)/d)},asin:function(){return this.mul(this).neg().add(1).sqrt().add(this.mul(c.I)).log().mul(c.I).neg()},acos:function(){return this.mul(this).neg().add(1).sqrt().mul(c.I).add(this).log().mul(c.I).neg()},atan:function(){return c.I.add(this).div(c.I.sub(this)).log().mul(c.I).div(2)},sinh:function(){var a=this.r,b=this.i;return new c(Math.sinh(a)*Math.cos(b),Math.cosh(a)*Math.sin(b))},cosh:function(){var a=this.r,b=this.i;return new c(Math.cosh(a)*Math.cos(b),Math.sinh(a)*Math.sin(b))},
tanh:function(){var a=this.r,b=this.i,d=Math.cosh(2*a)+Math.cos(2*b);return new c(Math.sinh(2*a)/d,Math.sin(2*b)/d)},inverse:function(){var a=this.r,b=this.i,d=a*a+b*b;if(0===d)throw"DIV/0";return new c(a/d,-b/d)},conjugate:function(){return new c(this.r,-this.i)},neg:function(){return new c(-this.r,-this.i)},ceil:function(a){a=Math.pow(10,a||0);return new c(Math.ceil(this.r*a)/a,Math.ceil(this.i*a)/a)},floor:function(a){a=Math.pow(10,a||0);return new c(Math.floor(this.r*a)/a,Math.floor(this.i*a)/
a)},round:function(a){a=Math.pow(10,a||0);return new c(Math.round(this.r*a)/a,Math.round(this.i*a)/a)},equals:function(a,b){h(a,b);return 1E-16>=Math.abs(d.r-this.r)&&1E-16>=Math.abs(d.i-this.i)},clone:function(){return new c(this.r,this.i)},toString:function(){var a=this.r,b=this.i,c="";if(isNaN(a*b))return"NaN";0!==a&&(c+=a);0!==b&&(0<b&&0!==a&&(c+="+"),-1===b?c+="-":1!==b&&(c+=b),c+="i");return c?c:"0"},toVector:function(){return[this.r,this.i]},valueOf:function(){return 0===this.i?this.r:null}};
c.ZERO=new c;c.ONE=new c(1,0);c.I=new c(0,1);c.PI=new c(Math.PI,0);c.E=new c(Math.E,0);"function"===typeof define&&define.amd?define([],function(){return c}):"object"===typeof exports?module.exports=c:m.Complex=c})(this);
